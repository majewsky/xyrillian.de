<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Praxisbeispiel: Datenauswertung auf der Kommandozeile - Xyrillian Noises</title>
  <link rel="stylesheet" href="/res/xyrillian.css" />
</head>
<body class="noises episode-stp has-nav-top-card">
  <nav class="top-card">
    <div>
      <a href="/noises/">
        <img class="sitelogo" src="/res/logo-noises.svg" alt="Xyrillian Noises Hörfunkproduktion">
      </a>
    </div>
  </nav>
  <header>
    <a class="coverart" href="/noises/stp/">
      <img src="/res/cover-stp.svg" alt="Cover-Art für: Schlüsseltechnologie">
    </a>
    <h2><a href="/noises/stp">Schlüsseltechnologie</a> #60 vom 29. August 2024</h2>
    <h1>Praxisbeispiel: Datenauswertung auf der Kommandozeile</h1>
      <p>Nachdem die beiden sich gegenseitig ihr Leid geklagt haben, geht es dann doch noch um Technik. Oder eher um deren Anwendung. Diesmal wieder mit einer Hands-on-Folge, denn es ist wichtig, vor Kunden und bei Präsentationen einen professionellen Eindruck zu machen.</p>
      <p><strong>Länge:</strong> 65:42 Minuten</p>
  </header>
    <audio controls preload="none">
        <source src="/dl/stp-060-praxisbeispiel-datenauswertung.mp3" type="audio/mpeg">
        <source src="/dl/stp-060-praxisbeispiel-datenauswertung.ogg" type="audio/ogg">
        <source src="/dl/stp-060-praxisbeispiel-datenauswertung.opus" type="audio/opus">
      <div class="audio-not-supported">
        <span>Webplayer nicht vom Browser unterstützt</span>
      </div>
    </audio>
    <div id="chapters">
      <div class="chapter" data-start="0" data-end="239">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">00:00</span>
        <span class="chapter-title">Intro und geklagtes Leid</span>
      </div>
      <div class="chapter" data-start="239" data-end="457">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">03:59</span>
        <span class="chapter-title">Einfürung und Szenario</span>
      </div>
      <div class="chapter" data-start="457" data-end="479">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">07:37</span>
        <span class="chapter-title">Sichtung der Messdaten</span>
      </div>
      <div class="chapter" data-start="479" data-end="669">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">07:59</span>
        <span class="chapter-title">Zeilenenden</span>
      </div>
      <div class="chapter" data-start="669" data-end="789">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">11:09</span>
        <span class="chapter-title">Whitespaces</span>
      </div>
      <div class="chapter" data-start="789" data-end="883">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">13:09</span>
        <span class="chapter-title">Header</span>
      </div>
      <div class="chapter" data-start="883" data-end="1201">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">14:43</span>
        <span class="chapter-title">CSV-Dateien</span>
      </div>
      <div class="chapter" data-start="1201" data-end="1300">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">20:01</span>
        <span class="chapter-title">Sanity-Check</span>
      </div>
      <div class="chapter" data-start="1300" data-end="1362">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">21:40</span>
        <span class="chapter-title">Abschweif: Ideolekt</span>
      </div>
      <div class="chapter" data-start="1362" data-end="1472">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">22:42</span>
        <span class="chapter-title">Sichtung mit &#34;head&#34;</span>
      </div>
      <div class="chapter" data-start="1472" data-end="1523">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">24:32</span>
        <span class="chapter-title">Aufbereitung der Daten</span>
      </div>
      <div class="chapter" data-start="1523" data-end="1587">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">25:23</span>
        <span class="chapter-title">mit &#34;tail&#34;</span>
      </div>
      <div class="chapter" data-start="1587" data-end="1823">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">26:27</span>
        <span class="chapter-title">mit &#34;sed&#34;</span>
      </div>
      <div class="chapter" data-start="1823" data-end="2512">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">30:23</span>
        <span class="chapter-title">Anmerkung zur Automatisierung</span>
      </div>
      <div class="chapter" data-start="2512" data-end="2657">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">41:52</span>
        <span class="chapter-title">Gnuplot</span>
      </div>
      <div class="chapter" data-start="2657" data-end="2783">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">44:17</span>
        <span class="chapter-title">Textmanipulation</span>
      </div>
      <div class="chapter" data-start="2783" data-end="2911">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">46:23</span>
        <span class="chapter-title">mit &#34;tr&#34;</span>
      </div>
      <div class="chapter" data-start="2911" data-end="3094">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">48:31</span>
        <span class="chapter-title">nochmal mit &#34;sed&#34;</span>
      </div>
      <div class="chapter" data-start="3094" data-end="3614">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">51:34</span>
        <span class="chapter-title">Gnuplot-script</span>
      </div>
      <div class="chapter" data-start="3614" data-end="3738">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">60:14</span>
        <span class="chapter-title">Orientierung im Befehlsdschungel</span>
      </div>
      <div class="chapter" data-start="3738" data-end="3863">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">62:18</span>
        <span class="chapter-title">Datumsformatierung ändern</span>
      </div>
      <div class="chapter" data-start="3863" data-end="3942.853">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">64:23</span>
        <span class="chapter-title">Verzweiflung aus der &#34;date&#34;-Dokumentation</span>
      </div>
    </div>
    <section>
      <h3>Download</h3>
      <ul>
          <li><a href="/dl/stp-060-praxisbeispiel-datenauswertung.mp3">MP3</a> (60,5 MiB)</li>
          <li><a href="/dl/stp-060-praxisbeispiel-datenauswertung.ogg">Ogg Vorbis</a> (37,9 MiB)</li>
          <li><a href="/dl/stp-060-praxisbeispiel-datenauswertung.opus">Opus</a> (22,9 MiB)</li>
      </ul>
    </section>
    <section>
      <h3>Shownotes</h3>
      <p><ul>
<li>
<p>Rückblick: STP006 &quot;Kommandozeilen und Unixphilosophie&quot;</p>
<ul>
<li>ttimeless hat gerade eine Gelegenheit, Daten zu analysieren, an der man das praktische Vorgehen mit Kommandozeilen-Werkzeugen gut demonstrieren kann</li>
<li>Ausgangssituation: <a href="https://www.conrad.de/de/p/voltcraft-dl-210th-dl-210th-temperatur-datenlogger-luftfeuchte-datenlogger-messgroesse-temperatur-luftfeuchtigkeit-30-1435091.html">Klimasensor-Datenlogger</a> in verschiedenen Räumen messen einmal pro Minute Temperatur und Luftfeuchtigkeit</li>
<li>mitgelieferte Software bietet eine rudimentäre Visualisierung sowie einen Datenexport als <a href="https://de.wikipedia.org/w/index.php?title=CSV_(Dateiformat)&amp;oldid=244981555">CSV</a></li>
<li>die <a href="http://dl.xyrillian.de/noises/stp-060-shownotes/">hier besprochenen CSV-Dateien</a> können zum Nachvollziehen heruntergeladen werden</li>
<li>Ziel: eigene Datenvisualisierung mit <a href="https://de.wikipedia.org/w/index.php?title=Gnuplot&amp;oldid=226771326">gnuplot</a></li>
</ul>
</li>
<li>
<p>erste Sichtprüfung: <code>&lt;Balkon.csv head</code></p>
<ul>
<li>acht Kopfzeilen mit Metadaten und Auswertungen (Berichtszeitraum, Maximum/Minimum/Durchschnitt)</li>
<li>diesen Header brauchen wir nicht, wir wollen die Rohdaten</li>
<li>Option 1: sofern immer acht Zeilen, z.B. <code>tail -n +9</code> oder <code>sed 1,8d</code></li>
<li>Option 2: Suchmuster auf den Zeileninhalt der letzten Kopfzeile, z.B. <code>sed 1,/^Aufnahmezeit/d</code></li>
<li>Option 3: nur Zeilen auswählen, die nach Daten aussehen, z.B. <code>grep '^&quot;[0-9]'</code></li>
</ul>
</li>
<li>
<p>Kopfzeilen entfernt: <code>&lt;Balkon.csv sed 1,8d</code></p>
<ul>
<li>nächstes Problem: die Anführungszeichen um die einzelnen Werte werden gnuplot verwirren -&gt; würden wir mit <code>tr -d \&quot;</code> wegbekommen</li>
<li>Problem: dann wären die Dezimalkommas nicht von den wertetrennenden Kommas zu unterscheiden</li>
<li>unsere Lösung: während wir Anführungszeichen entfernen, werden dazwischenliegende Kommas gleichzeitig durch ein anderes Trennzeichen (hier einen Tabulator) ersetzt -&gt; <code>sed 's/^&quot;//; s/&quot;,&quot;/\t/g; s/&quot;\s*$//'</code></li>
<li>hierin ist Trickserei erforderlich, weil die erzeugten Dateien Windows-Zeilenenden haben (CR+LF), nicht Unix-Zeilenenden (nur LF) -&gt; könnte man auch vorher mit <code>dos2unix</code> beheben, dann ist statt <code>s/&quot;\s*$//</code> nur <code>s/&quot;$//</code> erforderlich</li>
<li>Alternative (erfordert <a href="https://csvkit.readthedocs.org">csvkit</a>): <code>csvformat -d , -q \&quot; -U 3 -D $'\t'</code></li>
</ul>
</li>
<li>
<p>Anführungszeichen entfernt: <code>&lt;Balkon.csv sed 1,8d | sed 's/^&quot;//; s/&quot;,&quot;/\t/g; s/&quot;\s*$//' &gt;Balkon.dat</code></p>
<ul>
<li>zu Xyrills Überraschung ist das schon ausreichend, den Rest können wir in gnuplot machen</li>
</ul>
</li>
<li>
<p>Anzeige in gnuplot: das untenstehende Programm als <code>Balkon.gp</code> abspeichern, <code>gnuplot</code> aufrufen und <code>load 'Balkon.gp'</code> eingeben)</p>
<pre><code>set xdata time
set timefmt '%d-%m-%Y %H:%M:%S'
set format x '%d.%m.%Y %H:%M:%S'
set decimalsign ','
set datafile separator &quot;\t&quot;
set ylabel &quot;Temperatur °C&quot;
set y2label &quot;Luftfeuchte %&quot;
set y2tics
plot 'Balkon.dat' using 1:2 title 'Temperatur' with lines axes x1y1, 'Balkon.dat' using 1:3 title 'Luftfeuchtigkeit' with lines axes x1y2
</code></pre>
</li>
<li>
<p>Für die Ausgabe in eine Datei können noch diese beiden Zeilen vorangestellt werden:</p>
<pre><code>set terminal svg background &quot;white&quot; dashed size 1920,1080
set output &quot;Balkon.svg&quot;
</code></pre>
</li>
<li>
<p>Was, wenn gnuplot nicht so clever wäre?</p>
<ul>
<li>Dezimaltrennzeichen von Komma in Punkt ändern: <code>&lt;Balkon.dat tr , .</code></li>
<li>Datumsformat in ISO ändern: <code>&lt;Balkon.dat awk -F'\t' '{ split($1, DATE, /[^0-9]*/); $1 = DATE[3] &quot;-&quot; DATE[2] &quot;-&quot; DATE[1] &quot;T&quot; DATE[4] &quot;:&quot; DATE[5] &quot;:&quot; DATE[6] &quot;Z&quot;; print }'</code></li>
<li>Xyrill hatte auch geschaut, wie man die Zeitangaben in <code>date -d</code> bekommen könnte, um sie damit umzuwandeln, und wurde von <a href="https://www.gnu.org/software/coreutils/manual/html_node/Date-input-formats.html">einem wunderschönen Zitat</a> begrüßt (nachfolgende deutsche Übersetzung mittels <a href="https://www.deepl.com/translator">DeepL</a>):
<blockquote>
<p>Unsere zeitlichen Maßeinheiten, von Sekunden bis hin zu Monaten, sind so kompliziert, asymmetrisch und disjunkt, dass ein kohärentes mentales Rechnen in der Zeit nahezu unmöglich ist. In der Tat, hätte sich ein tyrannischer Gott ausgedacht, unseren Geist an die Zeit zu versklaven, um es uns nahezu unmöglich zu machen, der Unterwerfung unter durchweichte Routinen und unangenehme Überraschungen zu entkommen, hätte er kaum etwas Besseres tun können, als uns unser gegenwärtiges System zu überliefern. Es ist wie ein Satz trapezförmiger Bauklötze, ohne vertikale oder horizontale Flächen, wie eine Sprache, in der der einfachste Gedanke verschnörkelte Konstruktionen, nutzlose Partikel und langatmige Umschreibungen erfordert. Im Gegensatz zu den erfolgreicheren Mustern der Sprache und der Wissenschaft, die es uns ermöglichen, Eindrücken kühn oder zumindest nüchtern zu begegnen, fördert unser System der zeitlichen Berechnung stillschweigend und beharrlich unseren Terror vor der Zeit.</p>
<p>... Es ist, als ob Architekten die Länge in Fuß, die Breite in Metern und die Höhe in Ellen messen müssten; als ob grundlegende Bedienungsanleitungen die Kenntnis von fünf verschiedenen Sprachen erfordern würden. Kein Wunder also, dass wir in unsere eigene unmittelbare Vergangenheit oder Zukunft, auf den letzten Dienstag oder den Sonntag in einer Woche, oft mit einem Gefühl hilfloser Verwirrung blicken.  ...</p>
</blockquote>
</li>
</ul>
</li>
<li>
<p>im Gespräch erwähnt: <a href="https://requestforcomments.de/archives/400">ASCII-Folge von Request for Comments</a></p>
</li>
</ul></p>
    </section>
    <section>
      <h3>Audioquellen<span>&nbsp;in Abspielreihenfolge (soweit nicht gemeinfrei)</span></h3>
      <ul>
          <li><a href="https://freesound.org/people/MastersDisaster/sounds/218115/">MastersDisaster: &quot;Switch ON - Livingroom (Sample)&quot;</a></li>
          <li><a href="https://freesound.org/people/Garuda1982/sounds/538915/">Garuda1982: &quot;Switch on the fluorescent tube sound effect&quot;</a></li>
          <li><a href="https://www.youtube.com/watch?v=n8Yo-wD-QTo&amp;t=129s">Konrad Zuse: &quot;HR-Fernsehbericht von 1958&quot;</a></li>
          <li><a href="https://www.youtube.com/watch?v=jbrMBOF61e0&amp;t=9s">Donald Knuth: &quot;Lehrveranstaltung von 1981&quot;</a></li>
      </ul>
    </section>

  <footer class="legal">
    <a href="/legal/de/">Impressum/Datenschutz</a>
  </footer>
  <script async src="/res/chapter-marks.js"></script>
</body>
</html>
