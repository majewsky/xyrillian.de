<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Compilerbau - Xyrillian Noises</title>
  <link rel="stylesheet" href="/res/xyrillian.css" />
</head>
<body class="noises episode-stp has-nav-top-card">
  <nav class="top-card">
    <div>
      <a href="/noises/">
        <img class="sitelogo" src="/res/logo-noises.svg" alt="Xyrillian Noises Hörfunkproduktion">
      </a>
    </div>
  </nav>
  <header>
    <a class="coverart" href="/noises/stp/">
      <img src="/res/cover-stp.svg" alt="Cover-Art für: Schlüsseltechnologie">
    </a>
    <h2><a href="/noises/stp">Schlüsseltechnologie</a> #34 vom 23. März 2023</h2>
    <h1>Compilerbau</h1>
      <p>In dieser Episode soll es detaillierter um Compiler gehen. Jene Programmme, die dafür zuständig sind, andere Programme zu erzeugen. Um es mit C3PO zu sagen: &quot;... Wie pervers.&quot; :)</p>
      <p><strong>Länge:</strong> 69:18 Minuten</p>
  </header>
    <audio controls preload="none">
        <source src="/dl/stp-034-compilerbau.mp3" type="audio/mpeg">
        <source src="/dl/stp-034-compilerbau.ogg" type="audio/ogg">
        <source src="/dl/stp-034-compilerbau.opus" type="audio/opus">
      <div class="audio-not-supported">
        <span>Webplayer nicht vom Browser unterstützt</span>
      </div>
    </audio>
    <div id="chapters">
      <div class="chapter" data-start="0" data-end="288">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">00:00</span>
        <span class="chapter-title">Intro und Präludium</span>
      </div>
      <div class="chapter" data-start="288" data-end="739">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">04:48</span>
        <span class="chapter-title">Begriffsklärung: Compiler</span>
      </div>
      <div class="chapter" data-start="739" data-end="1169">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">12:19</span>
        <span class="chapter-title">Unterbegriffe zu Compiler</span>
      </div>
      <div class="chapter" data-start="1169" data-end="1323">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">19:29</span>
        <span class="chapter-title">Tätigkeit  des Compilers, Frontend</span>
      </div>
      <div class="chapter" data-start="1323" data-end="1512">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">22:03</span>
        <span class="chapter-title">lexikalische Analyse</span>
      </div>
      <div class="chapter" data-start="1512" data-end="1913">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">25:12</span>
        <span class="chapter-title">syntaktischegc Analyse</span>
      </div>
      <div class="chapter" data-start="1913" data-end="2355">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">31:53</span>
        <span class="chapter-title">semantische Analyse</span>
      </div>
      <div class="chapter" data-start="2355" data-end="2554">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">39:15</span>
        <span class="chapter-title">IR-Erzeugung</span>
      </div>
      <div class="chapter" data-start="2554" data-end="3086">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">42:34</span>
        <span class="chapter-title">Middleend: Optimierungsläufe auf IR</span>
      </div>
      <div class="chapter" data-start="3086" data-end="3157">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">51:26</span>
        <span class="chapter-title">Backend: Umwandlung in Maschinencode</span>
      </div>
      <div class="chapter" data-start="3157" data-end="3421">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">52:37</span>
        <span class="chapter-title">Codeauswahl</span>
      </div>
      <div class="chapter" data-start="3421" data-end="3700">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">57:01</span>
        <span class="chapter-title">Registerzuweisung</span>
      </div>
      <div class="chapter" data-start="3700" data-end="4158.37">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">61:40</span>
        <span class="chapter-title">Scheduling</span>
      </div>
    </div>
    <section>
      <h3>Download</h3>
      <ul>
          <li><a href="/dl/stp-034-compilerbau.mp3">MP3</a> (63,8 MiB)</li>
          <li><a href="/dl/stp-034-compilerbau.ogg">Ogg Vorbis</a> (40,1 MiB)</li>
          <li><a href="/dl/stp-034-compilerbau.opus">Opus</a> (24,0 MiB)</li>
      </ul>
    </section>
    <section>
      <h3>Shownotes</h3>
      <p><ul>
<li>
<p><a href="https://de.wikipedia.org/w/index.php?title=Compiler&amp;oldid=225542576">Compiler</a>: wandelt eine Programmiersprache (siehe STP033) in eine andere Programmiersprache oder Maschinensprache (siehe STP011)</p>
<ul>
<li>insb. Erkennung und Abweisung fehlerhafter Konstrukte (z.B. <code>42 + 5</code> ist okay, aber <code>42 + &quot;Test&quot;</code> nicht)</li>
</ul>
</li>
<li>
<p>Unterbegriffe zu &quot;Compiler&quot;</p>
<ul>
<li><strong>Interpreter</strong>: anstatt Erzeugung eines Zielcodes direkte Ausführung</li>
<li><strong>REPL</strong>: Interpreter für die interaktive Verwendung (&quot;Read Evaluate Print Loop&quot;)</li>
<li><strong>JIT-Compiler</strong>: direkte Ausführung wie ein Interpreter, aber es wird echter Maschinencode erzeugt (&quot;Just In Time&quot;)</li>
<li>z.B. portable Programme: Compiler erzeugt Maschinencode für ein virtuelles Maschinenmodell, Laufzeitumgebung ist ein Interpreter oder JIT-Compiler für diesen Maschinencode -&gt; analog dazu Frontend/Backend-Aufteilung innerhalb eines Compilers</li>
</ul>
</li>
<li>
<p>Frontend: Umformen der Texteingabe in eine Datenstruktur, Prüfung dieser Struktur auf inhaltliche Korrektheit (maschinenunabhängig, aber sprachabhängig)</p>
<ul>
<li>lexikalische Analyse: Zerteilen des Eingabetextes in eine Folge von Tokens mittels regulärer Ausdrücke (siehe STP021; diese Vorstufe ist eine Optimierung, weil reguläre Ausdrücke schneller ausgewertet werden können)</li>
<li>syntaktische Analyse: Umformen der Tokenliste in einen <strong>Syntaxbaum</strong> mittels eines kontextfreien Parsers (siehe <a href="https://de.wikipedia.org/w/index.php?title=Parser&amp;oldid=225991691#Beispiel">Beispiel bei Wikipedia</a>)</li>
<li>semantische Analyse: Prüfen des Syntaxbaums auf inhaltliche Korrektheit, meist mittels Markierungen an jedem Knoten des Baums (z.B. Welchen Typ hat der hier berechnete Wert? Passen die Werte des Elternknotens bzw. des Kindknotens dazu? etc.)</li>
<li>IR-Erzeugung: Umformung des Syntaxbaums in eine <strong>Intermediate Representation</strong> (IR), die sich für maschinenunabhängige Optimierung eignet</li>
</ul>
</li>
<li>
<p>Fortsetzung des Beispiels aus Wikipedia (aber mit einer Eingabevariable <code>y</code> und Ausgabevariable <code>x</code>): mögliche IR für den Ausdruck <code>x = y + (2 + 2) - sin(pi)</code></p>
</li>
</ul>
<pre><code>$1 = 2
$2 = $1 + $1
$3 = load %y
$4 = $3 + $2
$5 = pi
$6 = call sin($5)
$7 = $4 - $6
store %x, $7
</code></pre>
<ul>
<li>
<p>Middleend: Optimierungsläufe auf IR (Auswahl)</p>
<ul>
<li>Statische Formelauswertung zur Programmzeit: z.B. oben statt <code>$2 = $1 + $1</code> direkt <code>$2 = 4</code></li>
<li>Löschung von unerreichbarem Code: sehr einfach bei IR mit <strong>Static Single Assignment</strong> (SSA) wie im Beispiel</li>
<li>Invariantenextraktion aus Schleifen: wenn z.B. für verschiedene Werte von <code>x</code> der Ausdruck <code>sin(x) + cos(y)</code> berechnet wird, so kann man <code>cos(y)</code> vor der Schleife ein einziges Mal berechnen und das Zwischenergebnis wiederverwenden</li>
<li>Inlining: ist eine Funktion sehr kurz, kann es effizienter sein, einen Funktionsaufruf durch eine Kopie der Funktion zu ersetzen (insb. wenn dann weitere Optimierungen möglich werden)</li>
</ul>
</li>
<li>
<p>Beispiel: optimierte Variante der IR von oben</p>
</li>
</ul>
<pre><code>$3 = load %y
$7 = $3 + 4
store %x, $7
</code></pre>
<ul>
<li>Backend: Umwandlung der maschinenunabhängigen IR in tatsächlichen Maschinencode
<ul>
<li>Codeauswahl: für die einzelnen Operationen Auswahl der besten Maschinenbefehle
<ul>
<li>je nach Optimierungsziel: Geschwindigkeit, Speicherverbrauch, Energieverbrauch, etc. (z.B. <code>x * 3</code> kann je nach Maschinenarchitektur gewinnbringend durch <code>x + x + x</code> ersetzt werden)</li>
<li>schwieriger als gedacht wegen komplexen Befehlen (z.B. SIMD: Single Instruction Multiple Data)</li>
</ul>
</li>
<li>Registerzuweisung: nummerierte Register aus der IR ersetzen durch die tatsächlich in der Maschine verfügbaren Register
<ul>
<li>reduzierbar auf ein <a href="https://de.wikipedia.org/w/index.php?title=F%C3%A4rbung_(Graphentheorie)&amp;oldid=228052439">Graphenfärbungsproblem</a>: Knoten = IR-Register, Kanten = gemeinsame Verwendung in Berechnungen, Farben = echte Register</li>
</ul>
</li>
<li>Scheduling: optimale Sortierung der einzelnen Maschinenbefehle (soweit umordenbar)
<ul>
<li>z.B. parallele Ausnutzung verschiedener Recheneinheiten in der CPU (für Ganzzahl- und Fließkommazahl-Operationen)</li>
</ul>
</li>
<li>maschinenabhängige Optimierungen (aus Zeitgründen hier nicht)</li>
</ul>
</li>
</ul></p>
    </section>
    <section>
      <h3>Audioquellen<span>&nbsp;in Abspielreihenfolge (soweit nicht gemeinfrei)</span></h3>
      <ul>
          <li><a href="https://freesound.org/people/MastersDisaster/sounds/218115/">MastersDisaster: &quot;Switch ON - Livingroom (Sample)&quot;</a></li>
          <li><a href="https://freesound.org/people/Garuda1982/sounds/538915/">Garuda1982: &quot;Switch on the fluorescent tube sound effect&quot;</a></li>
          <li><a href="https://www.youtube.com/watch?v=n8Yo-wD-QTo&amp;t=129s">Konrad Zuse: &quot;HR-Fernsehbericht von 1958&quot;</a></li>
          <li><a href="https://www.youtube.com/watch?v=jbrMBOF61e0&amp;t=9s">Donald Knuth: &quot;Lehrveranstaltung von 1981&quot;</a></li>
      </ul>
    </section>

  <footer class="legal">
    <a href="/legal/de/">Impressum/Datenschutz</a>
  </footer>
  <script async src="/res/chapter-marks.js"></script>
</body>
</html>
