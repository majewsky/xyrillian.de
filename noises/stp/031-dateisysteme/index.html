<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Festplatten und Dateisysteme - Xyrillian Noises</title>
  <link rel="stylesheet" href="/res/xyrillian.css" />
</head>
<body class="noises episode-stp has-nav-top-card">
  <nav class="top-card">
    <div>
      <a href="/noises/">
        <img class="sitelogo" src="/res/logo-noises.svg" alt="Xyrillian Noises Hörfunkproduktion">
      </a>
    </div>
  </nav>
  <header>
    <a class="coverart" href="/noises/stp/">
      <img src="/res/cover-stp.svg" alt="Cover-Art für: Schlüsseltechnologie">
    </a>
    <h2><a href="/noises/stp">Schlüsseltechnologie</a> #31 vom 19. Januar 2023</h2>
    <h1>Festplatten und Dateisysteme</h1>
      <p>Mit dieser Episode kehrt STP zum Ursprung zurück, denn das initiale Ereignis hatte ebenfalls mit Dateisystemen zu tun.
Hier sprechen wir aber über deutlich mehr und auch andere Sachen. Darunter: Dinge, von denen Xyrill wenig bis keine Ahnung hat (physikalische Anschlüsse) und Dinge, von denen Xyrill deutlich mehr Ahnung hat (die Software dahinter und deren Verwendung). ttimeless raschelt derweil mit einer dicken Winterjacke.</p>
      <p><strong>Länge:</strong> 102:24 Minuten</p>
  </header>
    <audio controls preload="none">
        <source src="/dl/stp-031-dateisysteme.mp3" type="audio/mpeg">
        <source src="/dl/stp-031-dateisysteme.ogg" type="audio/ogg">
        <source src="/dl/stp-031-dateisysteme.opus" type="audio/opus">
      <div class="audio-not-supported">
        <span>Webplayer nicht vom Browser unterstützt</span>
      </div>
    </audio>
    <div id="chapters">
      <div class="chapter" data-start="0" data-end="365">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">00:00</span>
        <span class="chapter-title">Intro</span>
      </div>
      <div class="chapter" data-start="365" data-end="743">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">06:05</span>
        <span class="chapter-title">Blockbasierter Speicher</span>
      </div>
      <div class="chapter" data-start="743" data-end="772">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">12:23</span>
        <span class="chapter-title">Physikalische Anbindungen</span>
      </div>
      <div class="chapter" data-start="772" data-end="1090">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">12:52</span>
        <span class="chapter-title">USB</span>
      </div>
      <div class="chapter" data-start="1090" data-end="1187">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">18:10</span>
        <span class="chapter-title">SATA</span>
      </div>
      <div class="chapter" data-start="1187" data-end="1287">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">19:47</span>
        <span class="chapter-title">SAS</span>
      </div>
      <div class="chapter" data-start="1287" data-end="1715">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">21:27</span>
        <span class="chapter-title">NVMe</span>
      </div>
      <div class="chapter" data-start="1715" data-end="1950">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">28:35</span>
        <span class="chapter-title">Warum immer alles seriell?</span>
      </div>
      <div class="chapter" data-start="1950" data-end="2049">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">32:30</span>
        <span class="chapter-title">Dateisysteme als Key-Value-Datenbank</span>
      </div>
      <div class="chapter" data-start="2049" data-end="2416">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">34:09</span>
        <span class="chapter-title">Alternative Betrachtung als Massenspeicher</span>
      </div>
      <div class="chapter" data-start="2416" data-end="2912">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">40:16</span>
        <span class="chapter-title">Unixoide Dateisysteme mittels Inodes</span>
      </div>
      <div class="chapter" data-start="2912" data-end="2960">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">48:32</span>
        <span class="chapter-title">aktuelle Entwicklungen in Dateisystemen</span>
      </div>
      <div class="chapter" data-start="2960" data-end="3183">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">49:20</span>
        <span class="chapter-title">Journaling</span>
      </div>
      <div class="chapter" data-start="3183" data-end="3540">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">53:03</span>
        <span class="chapter-title">Online-Defragmentierung</span>
      </div>
      <div class="chapter" data-start="3540" data-end="4068">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">59:00</span>
        <span class="chapter-title">antiintuitive Schlussfolgerungen aus Inodestruktur</span>
      </div>
      <div class="chapter" data-start="4068" data-end="4346">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">67:48</span>
        <span class="chapter-title">Einschub Exkurs 2: Festplattenverschlüsselung</span>
      </div>
      <div class="chapter" data-start="4346" data-end="5034">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">72:26</span>
        <span class="chapter-title">zurück zu antiintuitiven Schlussfolgerungen</span>
      </div>
      <div class="chapter" data-start="5034" data-end="6117.275">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">83:54</span>
        <span class="chapter-title">Exkurs 1: Virtuelles Dateisystem</span>
      </div>
      <div class="chapter" data-start="6117.275" data-end="6144.768">
        <div class="chapter-progress"><div class="chapter-progress-filler">&nbsp;</div></div>
        <span class="chapter-start" title="Zur Kapitelmarke springen">101:57</span>
        <span class="chapter-title">Outro</span>
      </div>
    </div>
    <section>
      <h3>Download</h3>
      <ul>
          <li><a href="/dl/stp-031-dateisysteme.mp3">MP3</a> (94,1 MiB)</li>
          <li><a href="/dl/stp-031-dateisysteme.ogg">Ogg Vorbis</a> (58,5 MiB)</li>
          <li><a href="/dl/stp-031-dateisysteme.opus">Opus</a> (35,9 MiB)</li>
      </ul>
    </section>
    <section>
      <h3>Shownotes</h3>
      <p><ul>
<li>
<p><a href="https://de.wikipedia.org/wiki/Datenblock">blockbasierter Speicher (&quot;Block Storage&quot;)</a></p>
<ul>
<li>Festplatten handeln immer nur in festen Einheiten (Blöcken)</li>
<li>traditionellerweise 512 Byte, heutzutage 4 KiB</li>
</ul>
</li>
<li>
<p>kurzer Überblick zur physikalischen Anbindungen blockbasierter Speicher</p>
<ul>
<li><a href="https://de.wikipedia.org/w/index.php?title=Universal_Serial_Bus&amp;oldid=226444113">USB (Universal Serial Bus)</a>: für externe Festplatten, CD-Laufwerke, <em>*räusper*</em> Mini-Raketenwerfer <em>*räusper*</em>, etc.</li>
<li><a href="https://de.wikipedia.org/w/index.php?title=Serial_ATA&amp;oldid=220865700">SATA (Serial AT Attachment)</a>: für interne Festplatten, kabelgebundene Punkt-zu-Punkt-Verbindungen</li>
<li><a href="https://de.wikipedia.org/w/index.php?title=Serial_Attached_SCSI&amp;oldid=218079361">SAS (Serial Attached SCSI)</a>: für interne Festplatten, kabelgebundene Verbindungen auch mit Switching (mehrere Festplatten an einem Verteiler)</li>
<li><a href="https://de.wikipedia.org/w/index.php?title=NVM_Express&amp;oldid=222566309">NVMe (Non-Volatile Memory Express)</a>: für interne Festplatten, direkte Steckverbindung via PCI Express</li>
<li><a href="https://web.archive.org/web/20220929192234/https://old.reddit.com/r/explainlikeimfive/comments/5sgfzh/eli5_parallel_was_faster_than_serial_why_isnt/">Warum alles immer seriell?</a> Höhere Geschwindigkeiten = Synchronisierung immer schwieriger. Parallele Leitungen = Übersprechen/Interferenz = komplexe Kompensation notwendig bzw. bei flexiblen Systemen wie Kabeln nicht möglich.</li>
</ul>
</li>
<li>
<p>Rückbezug zu STP012: &quot;Dateisysteme sind eine besondere Form von Key-Value-Datenbank&quot;; keine Datenbank im engeren Sinne:</p>
<ul>
<li>keine widerspruchsfreie Speicherung, da keine Beziehungen zwischen verschiedenen Dateien möglich</li>
<li>keine Unterstützung für bedarfsgerechte Darstellungsformen; jede Datei hat genau ein Format</li>
</ul>
</li>
<li>
<p>alternative Perspektive als Vergleich zum blockbasierten Speicher</p>
<ul>
<li>jede Datei ist ihr eigener &quot;kleiner Massenspeicher&quot;</li>
<li>zusätzlich noch Metadaten (Dateiname, Erstelldatum, Zugriffsrechte, etc.)</li>
<li>Dateisystem kümmert sich um die Zuteilung des tatsächlichen blockbasierten Speichers an die einzelnen Dateien</li>
<li>Praxisbeispiel zur Zuteilung von Speicherplatz: Unix-Befehl <code>du -h</code> (&quot;disk usage&quot;)</li>
</ul>
</li>
<li>
<p>Dateisystem-Struktur unter unixoiden Betriebssystemen: mittels <a href="https://de.wikipedia.org/w/index.php?title=Inode&amp;oldid=226067530">Inodes</a></p>
<ul>
<li>ein Inode enthält alle Metadaten zu einem bestimmten Dateisystemeintrag (einer Datei, einem Verzeichnis, einer Verknüpfung, etc.) sowie (bei normalen Dateien) einen Verweis auf den Speicherort der tatsächlichen Daten</li>
<li>Größe eines Inodes: immer ein Vielfaches der Blockgröße (4 KiB, 8 KiB, etc.)</li>
<li>bei sehr kleinen Dateien mitunter direktes Ablegen des Dateiinhaltes im Inode</li>
<li>bei großen Dateien meist fragmentierter Inhalt: Ablage in mehreren separaten Stücken (wegen späterer Umschreibung oder wegen Platzmangel)</li>
<li>Verzeichnisse: Inode mit einer Liste von Einträgen (Name + Inode-Verweis)</li>
<li>Dateisystem = Inode-Liste + Dateiinhalte + Übersicht über noch freie Festplattenbereiche</li>
</ul>
</li>
<li>
<p>&quot;aktuelle&quot; Entwicklungen in Dateisystemen</p>
<ul>
<li><a href="https://de.wikipedia.org/w/index.php?title=Journaling-Dateisystem&amp;oldid=214907336">Journaling</a> (in NTFS seit 1993, in ext3 seit 2001): Transaktionen werden in einem separaten Festplattenbereich vorgemerkt, bevor sie tatsächlich ausgeführt werden; ermöglicht Abgeschlossenheit und Dauerhaftigkeit analog zum Write-Ahead-Log bei Datenbanken (siehe STP012), außerdem schnelleren Start nach Systemausfall (keine Komplettprüfung des Dateisystems nötig)</li>
<li><a href="https://de.wikipedia.org/w/index.php?title=Fragmentierung_(Dateisystem)&amp;oldid=201408972">Online-Defragmentierung</a> bzw. optimierte Speicherzuteilung zur Vermeidung von Fragmentierung (aber: aktives Defragmentieren = mehr Schreibzyklen = mehr Abnutzung)</li>
</ul>
</li>
<li>
<p>antiintuitive Schlussfolgerungen aus dieser Struktur</p>
<ul>
<li>&quot;sicheres Löschen&quot;: einfaches Löschen einer Datei löscht nur den Inode, aber überschreibt nicht den Inhalt (selbst Überschreiben der Datei hilft nicht unbedingt, weil die neuen Daten vielleicht an einer anderen Stelle landen, oder weil die alten Daten trotzdem noch im Journal liegen)</li>
<li>Löschen von im Verbrauch befindlichen Dateien: kein Problem, eine &quot;geöffnete Datei&quot; ist nur ein Verweis auf einen Inode; &quot;Löschen der Datei&quot; löscht nur den Verzeichnis-Eintrag; der Inode bleibt noch so lang bestehen, wie ein Prozess einen Verweis auf den Inode hält</li>
<li>anders bei Windows: Verweis auf eine offene Datei blockiert das Löschen -&gt; Konsequenzen für System-Updates</li>
</ul>
</li>
<li>
<p>Exkurs 1: virtuelles Dateisystem</p>
<ul>
<li>bis hier: physikalische Perspektive (Welche Bits stehen tatsächlich auf der Platte?)</li>
<li>jetzt: logische Perspektive (Was zeigt das Betriebssystem den Programmen?)</li>
<li>Unix: ein einziger Verzeichnisbaum, in das die verschiedenen Dateisysteme <a href="https://de.wikipedia.org/w/index.php?title=Mounten&amp;oldid=199499166">eingehängt</a> werden können; anders als das System mit Laufwerksbuchstaben unter Windows</li>
<li>&quot;Datei&quot; und &quot;Verzeichnis&quot; als abstrakte Konzepte, die u.a. durch echte Dateisysteme abgebildet werden können, oder auch durch was anderes (vgl. <a href="https://de.wikipedia.org/w/index.php?title=Everything_is_a_file&amp;oldid=223250415">&quot;Everything is a file.&quot;</a>)</li>
<li>Beispiel: <a href="https://de.wikipedia.org/w/index.php?title=Procfs&amp;oldid=222577559">procfs</a></li>
<li>Beispiel: <a href="https://de.wikipedia.org/w/index.php?title=SSHFS&amp;oldid=223439141">sshfs</a></li>
<li>Beispiel: transparente Behandlung von Zip-Archiven im Windows Explorer</li>
<li>Beispiel: <a href="https://de.wikipedia.org/w/index.php?title=/dev/random&amp;oldid=216549123">/dev/random</a> etc.</li>
</ul>
</li>
<li>
<p>Exkurs 2: Festplattenverschlüsselung</p>
<ul>
<li>Option 1: auf der Ebene des Dateisystems (einzelne Dateien oder Verzeichnisse werden verschlüsselt)</li>
<li>Option 2: auf der Ebene des blockbasierten Speichers -&gt; Dateisystem sieht als Speichermedium einen <em>virtuellen</em> blockbasierten Speicher, der die Verschlüsselung vornimmt und erst dann auf den tatsächlichen blockbasierten Speicher schreibt -&gt; schöne Arbeitsteilung</li>
<li>andere Anwendungsfälle für virtuelle blockbasierte Speicher: Netzwerklaufwerke, Dateisysteme innerhalb von Dateien</li>
</ul>
</li>
</ul></p>
    </section>
    <section>
      <h3>Audioquellen<span>&nbsp;in Abspielreihenfolge (soweit nicht gemeinfrei)</span></h3>
      <ul>
          <li><a href="https://freesound.org/people/MastersDisaster/sounds/218115/">MastersDisaster: &quot;Switch ON - Livingroom (Sample)&quot;</a></li>
          <li><a href="https://freesound.org/people/Garuda1982/sounds/538915/">Garuda1982: &quot;Switch on the fluorescent tube sound effect&quot;</a></li>
          <li><a href="https://www.youtube.com/watch?v=n8Yo-wD-QTo&amp;t=129s">Konrad Zuse: &quot;HR-Fernsehbericht von 1958&quot;</a></li>
          <li><a href="https://www.youtube.com/watch?v=jbrMBOF61e0&amp;t=9s">Donald Knuth: &quot;Lehrveranstaltung von 1981&quot;</a></li>
          <li><a href="https://www.youtube.com/watch?v=JcU95OeY48I">Gracie Films/20th Television: &quot;The Simpsons S04E12: »Marge vs. the Monorail«&quot;</a></li>
      </ul>
    </section>

  <footer class="legal">
    <a href="/legal/de/">Impressum/Datenschutz</a>
  </footer>
  <script async src="/res/chapter-marks.js"></script>
</body>
</html>
